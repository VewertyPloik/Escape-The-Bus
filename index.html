<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Escape the Bus</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #111;
      color: #eee;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #ffd700;
    }
    .screen {
      margin-bottom: 20px;
    }
    button {
      display: block;
      margin: 10px 0;
      padding: 10px;
      background-color: #333;
      border: none;
      color: #fff;
      cursor: pointer;
      border-radius: 6px;
    }
    button:hover {
      background-color: #555;
    }
    #undo {
      background-color: #900;
    }
  </style>
</head>
<body>

<h1>üå´Ô∏è Escape the Bus</h1>

<div id="game" class="screen"></div>
<button id="choice1"></button>
<button id="choice2"></button>
<button id="undo">Undo</button>

<script>
const screens = {
  1: {
    text: "You wake up on an abandoned school bus. Everything is silent and foggy outside.",
    choice1: "Check the back of the bus",
    choice2: "Step out the front door",
    next: [2, 3]
  },
  2: {
    text: "You head to the back. The emergency exit is open. You hear creaking.",
    choice1: "Jump out the emergency exit",
    choice2: "Turn around quickly",
    next: [4, 5]
  },
  3: {
    text: "You open the front door. A tall figure stands in the fog, not moving.",
    choice1: "Hide behind the bus",
    choice2: "Yell: 'Who are you?!'",
    next: [6, 7]
  },
  4: {
    text: "You jump out and land in the woods. Footsteps follow behind you.",
    choice1: "Hide behind a tree",
    choice2: "Loop back to the bus",
    next: [8, 9]
  },
  5: {
    text: "You turn around. A shadowy face is pressed against the window.",
    choice1: "Run out the front door",
    choice2: "Duck behind a seat",
    next: [10, 11]
  },
  6: {
    text: "You crouch behind the bus. Footsteps are getting closer.",
    choice1: "Peek around the tire",
    choice2: "Crawl under the bus",
    next: [12, 13]
  },
  7: {
    text: "You shout. The figure starts walking toward you.",
    choice1: "Run to the back of the bus",
    choice2: "Grab a stick",
    next: [14, 15]
  },
  8: {
    text: "You hide. The footsteps stop. A voice calls: '...you okay...?'",
    choice1: "Call back",
    choice2: "Stay hidden",
    next: [16, 17]
  },
  9: {
    text: "You sneak back to the bus. The figure is in the driver‚Äôs seat, mumbling.",
    choice1: "Climb in quietly",
    choice2: "Knock on the door",
    next: [18, 19]
  },
  10: {
    text: "You run outside. The figure is gone. A whisper: 'You shouldn't have left.'",
    choice1: "Freeze",
    choice2: "Sprint into the woods",
    next: [20, 21]
  },
  11: {
    text: "You duck behind a seat. Footsteps enter the bus...",
    choice1: "Crawl under seats",
    choice2: "Grab something to defend yourself",
    next: [22, 23]
  },
  12: {
    text: "You see the figure's legs. He leans down toward you.",
    choice1: "Roll away fast",
    choice2: "Hold your breath",
    next: [24, 25]
  },
  13: {
    text: "You grab a stick. He says, 'I was just trying to help!'",
    choice1: "Ask, 'Who are you?'",
    choice2: "Run away anyway",
    next: [26, 27]
  },
  14: {
    text: "You run to the back. It's quiet. Too quiet.",
    choice1: "Check the emergency door again",
    choice2: "Look under the seats",
    next: [28, 29]
  },
  15: {
    text: "Stick ready, you see him stop. 'I‚Äôm not trying to hurt you!' he says.",
    choice1: "Lower the stick",
    choice2: "Swing it anyway",
    next: [30, 31]
  },
  16: {
    text: "'I‚Äôm the bus driver,' he says. 'Field trip got canceled.'",
    choice1: "Step closer",
    choice2: "Back away",
    next: [32, 33]
  },
  17: {
    text: "You stay silent. He walks away, shutting the bus door behind him.",
    choice1: "Follow him",
    choice2: "Run away",
    next: [34, 35]
  },
  18: {
    text: "He mutters, 'Ugh... too old for this...' and sips coffee.",
    choice1: "Speak up",
    choice2: "Sneak back out",
    next: [36, 37]
  },
  19: {
    text: "He jumps. 'Whoa, you're still here?'",
    choice1: "Ask what's going on",
    choice2: "Try to run",
    next: [38, 39]
  },
  20: {
    text: "He holds out a thermos. 'Want cocoa?'",
    choice1: "Take the thermos",
    choice2: "Run again",
    next: [40, 41]
  },
  21: {
    text: "You fall. 'Wait! You‚Äôll get lost!' he yells.",
    choice1: "Keep running",
    choice2: "Stop and yell 'Wait!'",
    next: [42, 43]
  },
  22: {
    text: "Under the seats, you hear: '...granola bar... somewhere...'",
    choice1: "Ask for one",
    choice2: "Stay quiet",
    next: [44, 45]
  },
  23: {
    text: "You grab a wrench. 'Please don‚Äôt!' he pleads.",
    choice1: "Lower the wrench",
    choice2: "Swing anyway",
    next: [46, 47]
  },
  24: {
    text: "You roll, spot a road nearby!",
    choice1: "Run to the road",
    choice2: "Call for help",
    next: [48, 49]
  },
  25: {
    text: "You hold your breath. He looks under. 'You okay down there?'",
    choice1: "Nod silently",
    choice2: "Crawl out",
    next: [50, 51]
  },
  26: {
    text: "'I was napping!' he says. 'Didn't mean to scare you!'",
    choice1: "Ask why you're here",
    choice2: "Just listen",
    next: [52, 53]
  },
  27: {
    text: "You run. He doesn‚Äôt follow. The fog begins to clear.",
    choice1: "Go back",
    choice2: "Keep walking",
    next: [52, 54]
  },
  52: {
    text: "He nods. 'Sorry I scared you. Ready to go home?'",
    choice1: "Yes, please",
    choice2: "Where are we?",
    next: [55, 55]
  },
  53: {
    text: "He smiles. 'Kids always panic in this fog. You're safe now.'",
    choice1: "Sit down",
    choice2: "Ask for a phone",
    next: [55, 55]
  },
  54: {
    text: "You wander off. The fog never ends. You feel... lost.",
    choice1: "Go back to the bus",
    choice2: "Keep going",
    next: [52, 54]
  },
  55: {
    text: "THE END. You survived the night, and the truth is clear: it was all a misunderstanding.",
    choice1: "Play again",
    choice2: "Exit",
    next: [1, 55]
  }
};

let currentScreen = 1;
const history = [];

const game = document.getElementById("game");
const btn1 = document.getElementById("choice1");
const btn2 = document.getElementById("choice2");
const undo = document.getElementById("undo");

function loadScreen(n) {
  const screen = screens[n];
  if (!screen) return;

  game.innerText = screen.text;
  btn1.innerText = screen.choice1;
  btn2.innerText = screen.choice2;
  currentScreen = n;
}

btn1.onclick = () => {
  history.push(currentScreen);
  loadScreen(screens[currentScreen].next[0]);
};

btn2.onclick = () => {
  history.push(currentScreen);
  loadScreen(screens[currentScreen].next[1]);
};

undo.onclick = () => {
  if (history.length > 0) {
    const prev = history.pop();
    loadScreen(prev);
  }
};

loadScreen(currentScreen);
</script>

</body>
</html>
